#include <config.h>
#include <ticker.h>

String tickerText;
uint8_t tickerDelay;
uint8_t currentChar;
uint32_t tickerLastTime = 0;
int16_t tickerLowerLimit;
CRGB tickerTextColor;

typedef struct {
    int8_t size;
    uint8_t* data;
} Character;

Character* characters;
int16_t* tickerPositions;

void Ticker::Initialize(String text, CRGB textColor, uint8_t delay) {
    if (text.length() > 255)
        return;
    
    tickerText = text;
    tickerPositions = new int16_t[text.length()];
    for (uint8_t c = 0; c < tickerText.length(); c++) {
        tickerPositions[c] = c * 11 + 2;
    }
    tickerLowerLimit = -(tickerText.length() * 11);

    tickerTextColor = textColor;
    tickerDelay = delay;
    currentChar = 0;

    characters = new Character[95];
    characters[0].data = new uint8_t[0] {  };
    characters[0].size = 0;
    characters[1].data = new uint8_t[16] { 16, 17, 27, 28, 38, 39, 49, 50, 60, 61, 71, 72, 82, 83, 104, 105 };
    characters[1].size = 16;
    characters[2].data = new uint8_t[12] { 3, 4, 7, 8, 14, 18, 24, 25, 28, 29, 35, 39 };
    characters[2].size = 12;
    characters[3].data = new uint8_t[56] { 4, 5, 7, 8, 15, 16, 18, 19, 24, 25, 26, 27, 28, 29, 30, 31, 35, 36, 37, 38, 39, 40, 41, 42, 48, 49, 51, 52, 58, 59, 61, 62, 68, 69, 70, 71, 72, 73, 74, 75, 79, 80, 81, 82, 83, 84, 85, 86, 91, 92, 94, 95, 102, 103, 105, 106 };
    characters[3].size = 56;
    characters[4].data = new uint8_t[34] { 16, 25, 26, 27, 28, 29, 35, 36, 39, 40, 46, 47, 57, 58, 59, 60, 61, 70, 71, 72, 73, 79, 80, 83, 84, 90, 91, 94, 95, 101, 102, 103, 104, 105 };
    characters[4].size = 34;
    characters[5].data = new uint8_t[28] { 3, 4, 13, 16, 24, 27, 36, 37, 41, 42, 49, 50, 51, 52, 58, 59, 60, 61, 68, 69, 73, 74, 83, 86, 94, 97, 106, 107 };
    characters[5].size = 28;
    characters[6].data = new uint8_t[48] { 15, 16, 17, 18, 19, 24, 25, 26, 27, 28, 29, 30, 35, 36, 47, 48, 57, 58, 59, 60, 63, 64, 67, 68, 71, 72, 73, 74, 75, 78, 79, 83, 84, 85, 89, 90, 91, 92, 93, 94, 95, 96, 97, 102, 103, 104, 105, 108 };
    characters[6].size = 48;
    characters[7].data = new uint8_t[7] { 4, 5, 15, 25, 26, 36, 47 };
    characters[7].size = 7;
    characters[8].data = new uint8_t[16] { 6, 16, 17, 27, 37, 38, 48, 49, 59, 60, 70, 71, 82, 93, 94, 105 };
    characters[8].size = 16;
    characters[9].data = new uint8_t[16] { 4, 15, 16, 27, 38, 39, 49, 50, 60, 61, 71, 72, 82, 92, 93, 103 };
    characters[9].size = 16;
    characters[10].data = new uint8_t[34] { 4, 5, 15, 16, 23, 24, 25, 26, 27, 28, 29, 30, 34, 35, 36, 37, 38, 39, 40, 41, 47, 48, 49, 50, 57, 58, 59, 60, 61, 62, 68, 69, 72, 73 };
    characters[10].size = 34;
    characters[11].data = new uint8_t[36] { 4, 5, 15, 16, 26, 27, 37, 38, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 70, 71, 81, 82, 92, 93, 103, 104 };
    characters[11].size = 36;
    characters[12].data = new uint8_t[3] { 92, 93, 103 };
    characters[12].size = 3;
    characters[13].data = new uint8_t[14] { 46, 47, 48, 49, 50, 51, 52, 57, 58, 59, 60, 61, 62, 63 };
    characters[13].size = 14;
    characters[14].data = new uint8_t[6] { 92, 93, 94, 103, 104, 105 };
    characters[14].size = 6;
    characters[15].data = new uint8_t[20] { 6, 7, 17, 18, 27, 28, 38, 39, 48, 49, 59, 60, 69, 70, 80, 81, 90, 91, 101, 102 };
    characters[15].size = 20;
    characters[16].data = new uint8_t[38] { 4, 5, 6, 14, 15, 17, 18, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 51, 52, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 91, 92, 94, 95, 103, 104, 105 };
    characters[16].size = 38;
    characters[17].data = new uint8_t[29] { 5, 6, 13, 14, 15, 16, 17, 27, 28, 38, 39, 49, 50, 60, 61, 71, 72, 82, 83, 93, 94, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[17].size = 29;
    characters[18].data = new uint8_t[33] { 4, 5, 6, 7, 14, 15, 18, 19, 24, 25, 29, 30, 35, 36, 40, 41, 50, 51, 60, 61, 70, 71, 80, 81, 90, 91, 101, 102, 103, 104, 105, 106, 107 };
    characters[18].size = 33;
    characters[19].data = new uint8_t[36] { 2, 3, 4, 5, 6, 7, 12, 13, 18, 19, 29, 30, 39, 40, 47, 48, 49, 50, 51, 61, 62, 63, 73, 74, 84, 85, 89, 90, 95, 96, 101, 102, 103, 104, 105, 106 };
    characters[19].size = 36;
    characters[20].data = new uint8_t[38] { 5, 6, 7, 16, 17, 18, 26, 27, 28, 29, 37, 39, 40, 47, 48, 50, 51, 58, 61, 62, 68, 69, 72, 73, 79, 80, 81, 82, 83, 84, 85, 94, 95, 103, 104, 105, 106, 107 };
    characters[20].size = 38;
    characters[21].data = new uint8_t[32] { 3, 4, 5, 6, 7, 8, 14, 15, 25, 26, 36, 37, 47, 48, 49, 50, 51, 58, 62, 63, 73, 74, 84, 85, 90, 95, 96, 102, 103, 104, 105, 106 };
    characters[21].size = 32;
    characters[22].data = new uint8_t[37] { 4, 5, 6, 7, 13, 14, 15, 24, 25, 34, 35, 45, 46, 48, 49, 50, 56, 57, 58, 61, 62, 67, 68, 72, 73, 78, 79, 83, 84, 90, 91, 94, 95, 102, 103, 104, 105 };
    characters[22].size = 37;
    characters[23].data = new uint8_t[26] { 1, 2, 3, 4, 5, 6, 7, 12, 17, 18, 28, 29, 38, 39, 49, 50, 60, 61, 71, 72, 81, 82, 92, 93, 103, 104 };
    characters[23].size = 26;
    characters[24].data = new uint8_t[43] { 3, 4, 5, 6, 7, 13, 14, 18, 19, 24, 25, 29, 30, 35, 36, 40, 41, 47, 48, 49, 50, 51, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 90, 91, 95, 96, 102, 103, 104, 105, 106 };
    characters[24].size = 43;
    characters[25].data = new uint8_t[37] { 3, 4, 5, 6, 13, 14, 17, 18, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 50, 51, 52, 58, 59, 60, 62, 63, 73, 74, 83, 84, 93, 94, 95, 101, 102, 103, 104 };
    characters[25].size = 37;
    characters[26].data = new uint8_t[12] { 26, 27, 28, 37, 38, 39, 92, 93, 94, 103, 104, 105 };
    characters[26].size = 12;
    characters[27].data = new uint8_t[9] { 26, 27, 28, 37, 38, 39, 92, 93, 103 };
    characters[27].size = 9;
    characters[28].data = new uint8_t[28] { 18, 19, 27, 28, 29, 30, 37, 38, 39, 46, 47, 48, 55, 56, 57, 58, 68, 69, 70, 81, 82, 83, 93, 94, 95, 96, 106, 107 };
    characters[28].size = 28;
    characters[29].data = new uint8_t[36] { 33, 34, 35, 36, 37, 38, 39, 40, 41, 44, 45, 46, 47, 48, 49, 50, 51, 52, 66, 67, 68, 69, 70, 71, 72, 73, 74, 77, 78, 79, 80, 81, 82, 83, 84, 85 };
    characters[29].size = 36;
    characters[30].data = new uint8_t[28] { 11, 12, 22, 23, 24, 25, 35, 36, 37, 48, 49, 50, 60, 61, 62, 63, 70, 71, 72, 79, 80, 81, 88, 89, 90, 91, 99, 100 };
    characters[30].size = 28;
    characters[31].data = new uint8_t[33] { 2, 3, 4, 5, 6, 12, 13, 14, 15, 16, 17, 18, 23, 24, 28, 29, 34, 35, 39, 40, 49, 50, 51, 58, 59, 60, 61, 69, 70, 91, 92, 102, 103 };
    characters[31].size = 33;
    characters[32].data = new uint8_t[27] { 15, 16, 17, 25, 29, 35, 40, 46, 49, 50, 51, 57, 59, 62, 68, 70, 73, 79, 82, 83, 84, 90, 102, 103, 104, 105, 106 };
    characters[32].size = 27;
    characters[33].data = new uint8_t[53] { 2, 3, 4, 5, 6, 13, 14, 15, 16, 17, 18, 26, 27, 28, 29, 37, 40, 47, 48, 51, 52, 58, 59, 60, 61, 62, 63, 69, 70, 71, 72, 73, 74, 79, 80, 85, 86, 89, 90, 91, 92, 95, 96, 97, 98, 100, 101, 102, 103, 106, 107, 108, 109 };
    characters[33].size = 53;
    characters[34].data = new uint8_t[61] { 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 48, 49, 50, 51, 57, 58, 59, 60, 61, 62, 63, 68, 69, 74, 75, 79, 80, 85, 86, 89, 90, 91, 92, 93, 94, 95, 96, 97, 100, 101, 102, 103, 104, 105, 106, 107 };
    characters[34].size = 61;
    characters[35].data = new uint8_t[46] { 3, 4, 5, 6, 8, 9, 13, 14, 15, 16, 17, 18, 19, 20, 23, 24, 25, 30, 31, 34, 35, 41, 42, 45, 46, 56, 57, 67, 68, 78, 79, 80, 85, 86, 90, 91, 92, 93, 94, 95, 96, 97, 103, 104, 105, 106 };
    characters[35].size = 46;
    characters[36].data = new uint8_t[56] { 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 31, 35, 36, 41, 42, 46, 47, 52, 53, 57, 58, 63, 64, 68, 69, 74, 75, 79, 80, 84, 85, 86, 89, 90, 91, 92, 93, 94, 95, 96, 100, 101, 102, 103, 104, 105, 106 };
    characters[36].size = 56;
    characters[37].data = new uint8_t[66] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 17, 18, 19, 20, 24, 25, 30, 31, 35, 36, 38, 39, 41, 42, 46, 47, 48, 49, 50, 57, 58, 59, 60, 61, 68, 69, 71, 72, 74, 75, 79, 80, 85, 86, 89, 90, 91, 92, 93, 94, 95, 96, 97, 100, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[37].size = 66;
    characters[38].data = new uint8_t[56] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 17, 18, 19, 20, 24, 25, 30, 31, 35, 36, 38, 39, 41, 42, 46, 47, 48, 49, 50, 57, 58, 59, 60, 61, 68, 69, 71, 72, 79, 80, 89, 90, 91, 92, 93, 94, 100, 101, 102, 103, 104, 105 };
    characters[38].size = 56;
    characters[39].data = new uint8_t[52] { 3, 4, 5, 7, 8, 13, 14, 15, 16, 17, 18, 19, 23, 24, 25, 29, 30, 34, 35, 45, 46, 56, 57, 60, 61, 62, 63, 64, 67, 68, 71, 72, 73, 74, 75, 78, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 102, 103, 104, 105, 106 };
    characters[39].size = 52;
    characters[40].data = new uint8_t[62] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 48, 49, 50, 51, 52, 57, 58, 59, 60, 61, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 89, 90, 91, 92, 94, 95, 96, 97, 100, 101, 102, 103, 105, 106, 107, 108 };
    characters[40].size = 62;
    characters[41].data = new uint8_t[44] { 2, 3, 4, 5, 6, 7, 8, 9, 13, 14, 15, 16, 17, 18, 19, 20, 27, 28, 38, 39, 49, 50, 60, 61, 71, 72, 82, 83, 90, 91, 92, 93, 94, 95, 96, 97, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[41].size = 44;
    characters[42].data = new uint8_t[42] { 4, 5, 6, 7, 8, 9, 10, 15, 16, 17, 18, 19, 20, 21, 29, 30, 40, 41, 51, 52, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 103, 104, 105 };
    characters[42].size = 42;
    characters[43].data = new uint8_t[55] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 28, 29, 35, 36, 38, 39, 46, 47, 48, 49, 57, 58, 59, 60, 61, 68, 69, 72, 73, 79, 80, 83, 84, 89, 90, 91, 92, 95, 96, 97, 100, 101, 102, 103, 106, 107, 108 };
    characters[43].size = 55;
    characters[44].data = new uint8_t[48] { 1, 2, 3, 4, 5, 6, 12, 13, 14, 15, 16, 17, 25, 26, 36, 37, 47, 48, 58, 59, 63, 64, 69, 70, 74, 75, 80, 81, 85, 86, 89, 90, 91, 92, 93, 94, 95, 96, 97, 100, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[44].size = 48;
    characters[45].data = new uint8_t[72] { 0, 1, 2, 3, 7, 8, 9, 10, 11, 12, 13, 14, 18, 19, 20, 21, 23, 24, 25, 26, 28, 29, 30, 31, 34, 35, 37, 39, 41, 42, 45, 46, 48, 50, 52, 53, 56, 57, 59, 60, 61, 63, 64, 67, 68, 71, 74, 75, 78, 79, 85, 86, 88, 89, 90, 91, 92, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 105, 106, 107, 108, 109 };
    characters[45].size = 72;
    characters[46].data = new uint8_t[65] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 26, 27, 29, 30, 35, 36, 37, 38, 40, 41, 46, 47, 48, 49, 51, 52, 57, 58, 60, 61, 62, 63, 68, 69, 71, 72, 73, 74, 79, 80, 83, 84, 85, 89, 90, 91, 92, 94, 95, 96, 100, 101, 102, 103, 105, 106, 107 };
    characters[46].size = 65;
    characters[47].data = new uint8_t[44] { 4, 5, 6, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 34, 35, 41, 42, 45, 46, 52, 53, 56, 57, 63, 64, 67, 68, 74, 75, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 103, 104, 105 };
    characters[47].size = 44;
    characters[48].data = new uint8_t[52] { 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 48, 49, 50, 51, 52, 57, 58, 59, 60, 61, 62, 68, 69, 79, 80, 89, 90, 91, 92, 93, 94, 100, 101, 102, 103, 104, 105 };
    characters[48].size = 52;
    characters[49].data = new uint8_t[44] { 4, 5, 6, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 34, 35, 41, 42, 45, 46, 52, 53, 56, 57, 63, 64, 67, 68, 74, 75, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 103, 104, 105 };
    characters[49].size = 44;
    characters[50].data = new uint8_t[59] { 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 48, 49, 50, 51, 57, 58, 59, 60, 61, 68, 69, 71, 72, 73, 79, 80, 83, 84, 85, 89, 90, 91, 92, 93, 95, 96, 97, 100, 101, 102, 103, 104, 107, 108 };
    characters[50].size = 59;
    characters[51].data = new uint8_t[44] { 3, 4, 5, 7, 8, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 35, 36, 47, 48, 49, 50, 59, 60, 61, 62, 73, 74, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 101, 102, 104, 105, 106 };
    characters[51].size = 44;
    characters[52].data = new uint8_t[56] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 23, 24, 27, 28, 31, 32, 34, 35, 38, 39, 42, 43, 45, 46, 49, 50, 53, 54, 60, 61, 71, 72, 82, 83, 91, 92, 93, 94, 95, 96, 102, 103, 104, 105, 106, 107 };
    characters[52].size = 56;
    characters[53].data = new uint8_t[48] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 29, 30, 35, 36, 40, 41, 46, 47, 51, 52, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 91, 92, 93, 94, 95, 103, 104, 105 };
    characters[53].size = 48;
    characters[54].data = new uint8_t[44] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 29, 30, 35, 36, 40, 41, 47, 48, 50, 51, 58, 59, 61, 62, 69, 70, 72, 73, 81, 83, 92, 93, 94, 103, 104, 105 };
    characters[54].size = 44;
    characters[55].data = new uint8_t[67] { 0, 1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 23, 24, 30, 31, 34, 35, 37, 38, 39, 41, 42, 45, 46, 48, 49, 50, 52, 53, 56, 57, 59, 60, 61, 63, 64, 68, 70, 72, 74, 79, 80, 81, 83, 84, 85, 90, 91, 92, 94, 95, 96, 101, 102, 103, 105, 106, 107 };
    characters[55].size = 67;
    characters[56].data = new uint8_t[54] { 1, 2, 3, 4, 6, 7, 8, 9, 12, 13, 14, 15, 17, 18, 19, 20, 24, 25, 29, 30, 36, 37, 39, 40, 48, 49, 50, 59, 60, 61, 69, 70, 72, 73, 79, 80, 84, 85, 89, 90, 91, 92, 94, 95, 96, 97, 100, 101, 102, 103, 105, 106, 107, 108 };
    characters[56].size = 54;
    characters[57].data = new uint8_t[46] { 1, 2, 3, 4, 7, 8, 9, 10, 12, 13, 14, 15, 18, 19, 20, 21, 24, 25, 30, 31, 36, 37, 40, 41, 48, 49, 50, 51, 60, 61, 71, 72, 82, 83, 91, 92, 93, 94, 95, 96, 102, 103, 104, 105, 106, 107 };
    characters[57].size = 46;
    characters[58].data = new uint8_t[48] { 2, 3, 4, 5, 6, 7, 8, 13, 14, 15, 16, 17, 18, 19, 24, 25, 29, 30, 35, 36, 39, 40, 49, 50, 59, 60, 69, 70, 73, 74, 79, 80, 84, 85, 90, 91, 92, 93, 94, 95, 96, 101, 102, 103, 104, 105, 106, 107 };
    characters[58].size = 48;
    characters[59].data = new uint8_t[24] { 3, 4, 5, 6, 14, 15, 25, 26, 36, 37, 47, 48, 58, 59, 69, 70, 80, 81, 91, 92, 102, 103, 104, 105 };
    characters[59].size = 24;
    characters[60].data = new uint8_t[20] { 2, 3, 13, 14, 25, 26, 36, 37, 48, 49, 59, 60, 71, 72, 82, 83, 94, 95, 105, 106 };
    characters[60].size = 20;
    characters[61].data = new uint8_t[24] { 4, 5, 6, 7, 17, 18, 28, 29, 39, 40, 50, 51, 61, 62, 72, 73, 83, 84, 94, 95, 103, 104, 105, 106 };
    characters[61].size = 24;
    characters[62].data = new uint8_t[8] { 2, 3, 7, 8, 13, 14, 18, 19 };
    characters[62].size = 8;
    characters[63].data = new uint8_t[22] { 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109 };
    characters[63].size = 22;
    characters[64].data = new uint8_t[3] { 4, 16, 28 };
    characters[64].size = 3;
    characters[65].data = new uint8_t[30] { 36, 37, 38, 39, 40, 51, 52, 62, 63, 69, 70, 71, 72, 73, 74, 79, 80, 84, 85, 90, 91, 94, 95, 96, 102, 103, 104, 106, 107, 108 };
    characters[65].size = 30;
    characters[66].data = new uint8_t[40] { 1, 2, 3, 13, 14, 24, 25, 35, 36, 38, 39, 40, 46, 47, 48, 51, 52, 57, 58, 63, 64, 68, 69, 74, 75, 79, 80, 85, 86, 90, 91, 92, 95, 96, 100, 101, 102, 104, 105, 106 };
    characters[66].size = 40;
    characters[67].data = new uint8_t[26] { 36, 37, 38, 39, 41, 46, 47, 51, 52, 56, 57, 63, 67, 68, 78, 79, 85, 90, 91, 95, 96, 102, 103, 104, 105, 106 };
    characters[67].size = 26;
    characters[68].data = new uint8_t[40] { 6, 7, 8, 18, 19, 29, 30, 36, 37, 38, 40, 41, 46, 47, 50, 51, 52, 56, 57, 62, 63, 67, 68, 73, 74, 78, 79, 84, 85, 90, 91, 94, 95, 96, 102, 103, 104, 106, 107, 108 };
    characters[68].size = 40;
    characters[69].data = new uint8_t[34] { 36, 37, 38, 39, 40, 46, 47, 51, 52, 56, 57, 63, 64, 67, 68, 69, 70, 71, 72, 73, 74, 75, 78, 79, 90, 91, 96, 97, 102, 103, 104, 105, 106, 107 };
    characters[69].size = 34;
    characters[70].data = new uint8_t[34] { 5, 6, 7, 8, 9, 10, 15, 16, 26, 27, 35, 36, 37, 38, 39, 40, 41, 48, 49, 59, 60, 70, 71, 81, 82, 92, 93, 101, 102, 103, 104, 105, 106, 107 };
    characters[70].size = 34;
    characters[71].data = new uint8_t[42] { 3, 4, 5, 7, 8, 9, 13, 14, 17, 18, 19, 23, 24, 29, 30, 34, 35, 40, 41, 45, 46, 51, 52, 57, 58, 61, 62, 63, 69, 70, 71, 73, 74, 84, 85, 95, 96, 102, 103, 104, 105, 106 };
    characters[71].size = 42;
    characters[72].data = new uint8_t[41] { 1, 2, 3, 13, 14, 24, 25, 35, 36, 38, 39, 40, 46, 47, 48, 51, 52, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 90, 91, 95, 96, 100, 101, 102, 103, 105, 106, 107, 108 };
    characters[72].size = 41;
    characters[73].data = new uint8_t[26] { 5, 6, 16, 17, 36, 37, 38, 39, 49, 50, 60, 61, 71, 72, 82, 83, 93, 94, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[73].size = 26;
    characters[74].data = new uint8_t[28] { 5, 6, 16, 17, 35, 36, 37, 38, 39, 40, 50, 51, 61, 62, 72, 73, 83, 84, 90, 91, 94, 95, 101, 102, 103, 104, 105, 106 };
    characters[74].size = 28;
    characters[75].data = new uint8_t[41] { 1, 2, 3, 13, 14, 24, 25, 35, 36, 38, 39, 40, 41, 46, 47, 49, 50, 57, 58, 59, 60, 68, 69, 70, 71, 79, 80, 82, 83, 90, 91, 94, 95, 100, 101, 102, 104, 105, 106, 107, 108 };
    characters[75].size = 41;
    characters[76].data = new uint8_t[28] { 3, 4, 5, 6, 16, 17, 27, 28, 38, 39, 49, 50, 60, 61, 71, 72, 82, 83, 93, 94, 101, 102, 103, 104, 105, 106, 107, 108 };
    characters[76].size = 28;
    characters[77].data = new uint8_t[46] { 34, 35, 36, 37, 38, 39, 40, 41, 46, 47, 49, 50, 52, 53, 57, 58, 60, 61, 63, 64, 68, 69, 71, 72, 74, 75, 79, 80, 82, 83, 85, 86, 90, 91, 93, 94, 96, 97, 100, 101, 102, 104, 105, 107, 108, 109 };
    characters[77].size = 46;
    characters[78].data = new uint8_t[35] { 34, 35, 36, 38, 39, 40, 46, 47, 48, 51, 52, 57, 58, 62, 63, 68, 69, 73, 74, 79, 80, 84, 85, 90, 91, 95, 96, 100, 101, 102, 103, 105, 106, 107, 108 };
    characters[78].size = 35;
    characters[79].data = new uint8_t[30] { 36, 37, 38, 39, 40, 46, 47, 51, 52, 56, 57, 63, 64, 67, 68, 74, 75, 78, 79, 85, 86, 90, 91, 95, 96, 102, 103, 104, 105, 106 };
    characters[79].size = 30;
    characters[80].data = new uint8_t[42] { 1, 2, 3, 5, 6, 7, 13, 14, 15, 18, 19, 24, 25, 30, 31, 35, 36, 41, 42, 46, 47, 52, 53, 57, 58, 59, 62, 63, 68, 69, 71, 72, 73, 79, 80, 90, 91, 100, 101, 102, 103, 104 };
    characters[80].size = 42;
    characters[81].data = new uint8_t[42] { 3, 4, 5, 7, 8, 9, 13, 14, 17, 18, 19, 23, 24, 29, 30, 34, 35, 40, 41, 45, 46, 51, 52, 57, 58, 61, 62, 63, 69, 70, 71, 73, 74, 84, 85, 95, 96, 104, 105, 106, 107, 108 };
    characters[81].size = 42;
    characters[82].data = new uint8_t[27] { 35, 36, 37, 38, 40, 41, 42, 48, 49, 50, 53, 54, 59, 60, 70, 71, 81, 82, 92, 93, 101, 102, 103, 104, 105, 106, 107 };
    characters[82].size = 27;
    characters[83].data = new uint8_t[32] { 37, 38, 39, 40, 41, 42, 47, 48, 52, 53, 58, 59, 60, 61, 70, 71, 72, 73, 74, 84, 85, 86, 91, 92, 96, 97, 102, 103, 104, 105, 106, 107 };
    characters[83].size = 32;
    characters[84].data = new uint8_t[28] { 4, 5, 15, 16, 26, 27, 35, 36, 37, 38, 39, 40, 41, 48, 49, 59, 60, 70, 71, 81, 82, 92, 93, 97, 104, 105, 106, 107 };
    characters[84].size = 28;
    characters[85].data = new uint8_t[33] { 35, 36, 37, 40, 41, 42, 47, 48, 52, 53, 58, 59, 63, 64, 69, 70, 74, 75, 80, 81, 85, 86, 91, 92, 95, 96, 97, 103, 104, 105, 107, 108, 109 };
    characters[85].size = 33;
    characters[86].data = new uint8_t[30] { 34, 35, 36, 37, 39, 40, 41, 42, 46, 47, 51, 52, 57, 58, 62, 63, 69, 70, 72, 73, 80, 81, 83, 84, 92, 93, 94, 103, 104, 105 };
    characters[86].size = 30;
    characters[87].data = new uint8_t[40] { 33, 34, 35, 36, 40, 41, 42, 43, 45, 46, 52, 53, 56, 57, 60, 63, 64, 67, 68, 70, 71, 72, 74, 75, 79, 80, 81, 83, 84, 85, 90, 91, 92, 94, 95, 96, 101, 102, 106, 107 };
    characters[87].size = 40;
    characters[88].data = new uint8_t[33] { 34, 35, 36, 37, 39, 40, 41, 42, 47, 48, 50, 51, 59, 60, 61, 70, 71, 72, 81, 82, 83, 91, 92, 94, 95, 100, 101, 102, 103, 105, 106, 107, 108 };
    characters[88].size = 33;
    characters[89].data = new uint8_t[33] { 22, 23, 24, 25, 28, 29, 30, 31, 34, 35, 40, 41, 46, 47, 50, 51, 57, 58, 61, 62, 69, 71, 72, 80, 81, 82, 83, 92, 93, 102, 103, 104, 105 };
    characters[89].size = 33;
    characters[90].data = new uint8_t[27] { 35, 36, 37, 38, 39, 40, 41, 46, 51, 52, 61, 62, 70, 71, 72, 80, 81, 90, 91, 96, 101, 102, 103, 104, 105, 106, 107 };
    characters[90].size = 27;
    characters[91].data = new uint8_t[20] { 6, 7, 16, 17, 27, 28, 38, 39, 49, 50, 59, 60, 71, 72, 82, 83, 93, 94, 105, 106 };
    characters[91].size = 20;
    characters[92].data = new uint8_t[20] { 4, 5, 15, 16, 26, 27, 37, 38, 48, 49, 59, 60, 70, 71, 81, 82, 92, 93, 103, 104 };
    characters[92].size = 20;
    characters[93].data = new uint8_t[20] { 4, 5, 16, 17, 27, 28, 38, 39, 49, 50, 61, 62, 71, 72, 82, 83, 93, 94, 103, 104 };
    characters[93].size = 20;
    characters[94].data = new uint8_t[5] { 48, 58, 60, 62, 72 };
    characters[94].size = 5;
}

void Ticker::Handle(HandlerInfo info) {
    if (tickerLastTime == 0) {
        tickerLastTime = info.uptime;
        return;
    }

    for (uint8_t c = 0; c < tickerText.length(); c++) {
        char thisChar = tickerText.c_str()[c];
        if (thisChar == 32) continue;
        Character thisCharacter = characters[thisChar - 32];
        for (uint8_t i = 0; i < thisCharacter.size; i++) {
            uint8_t displayIndex = thisCharacter.data[i] + tickerPositions[c];
            if (displayIndex >= 0 && displayIndex < 255 && 
                displayIndex % 11 >= tickerPositions[c] && 
                displayIndex % 11 < tickerPositions[c] + 11) {
                Display::SetLED(displayIndex, tickerTextColor);
            }
        }
    }

    if (info.uptime - tickerLastTime >= tickerDelay) { 
        for (uint8_t c = 0; c < tickerText.length(); c++) {
            if (tickerPositions[c] > tickerLowerLimit) {
                tickerPositions[c] = tickerPositions[c] - 1;
            } else {
                tickerPositions[c] = 11;
            }
        }
        
        tickerLastTime = info.uptime;
    }
}
